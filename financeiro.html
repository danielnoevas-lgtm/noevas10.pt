<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Projeto Financeiro</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
textarea {
    width: 100%;
    min-height: 90px;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 20px;
}
.button {
    padding: 14px 22px;
    border-radius: 10px;
    background: #4c28ff;
    color: #fff;
    border: none;
    cursor: pointer;
    width: 100%;
    margin-top: 15px;
    font-size: 16px;
}
</style>

</head>

<body>

<nav class="glass-nav">
  <div class="nav-container">
    <div class="logo">Noevas10</div>
    <ul class="nav-links">
      <li><a href="index.html">InÃ­cio</a></li>
      <li><a href="sobre.html">Sobre Mim</a></li>
      <li><a href="projetos.html" class="active">Projetos</a></li>
      <li><a href="contactos.html">Contactos</a></li>

      <li id="loginLink"><a href="login.html">Login</a></li>
      <li id="profileLink" style="display:none;"><a href="profile.html">Perfil</a></li>
      <li id="logoutLink" style="display:none;"><a href="#" onclick="logoutHandler()">Sair</a></li>
    </ul>
  </div>
</nav>

<section class="container" style="padding-top:120px;">
<h1>Projeto Financeiro</h1>

<form id="formProjeto">
<div id="perguntas"></div>

<button type="button" class="button" onclick="submeterWhatsApp()">ðŸ“© Enviar para WhatsApp</button>
<button type="button" class="button" onclick="gerarPDF()">ðŸ“„ Baixar PDF</button>

</form>
</section>

<script>
const perguntas = [
"Qual Ã© a tua principal fonte de rendimento?",
"Quais sÃ£o as tuas despesas mensais fixas?",
"Quanto poupas por mÃªs em mÃ©dia?",
"Tens algum fundo de emergÃªncia? Se sim, quanto?",
"Quais sÃ£o os teus maiores desafios financeiros atualmente?",
"Tens algum objetivo financeiro a curto prazo?",
"E a mÃ©dio prazo?",
"Tens algum investimento? Se sim, qual?",
"O que te impede de melhorar a tua situaÃ§Ã£o financeira?",
"O que gostarias de mudar no teu comportamento financeiro?",
"Tens dÃ­vidas? Especifica o valor e tipo.",
"Qual Ã© a tua relaÃ§Ã£o emocional com o dinheiro?",
"QuÃ£o organizado consideras o teu planeamento financeiro?",
"Quais gastos supÃ©rfluos gostarias de eliminar?",
"Quanto gostarias de ganhar por mÃªs?",
"Qual seria para ti estabilidade financeira?",
"Como imaginas a tua liberdade financeira?",
"Qual Ã© o maior objetivo financeiro da tua vida?",
"O que estÃ¡s disposto(a) a mudar para o alcanÃ§ar?",
"Se tivesses orientaÃ§Ã£o financeira, o que gostarias de aprender?"
];

let html = "";
perguntas.forEach((p,i)=>{
  html += `<label><strong>${i+1}. ${p}</strong></label><textarea id="p${i}"></textarea>`;
});
document.getElementById("perguntas").innerHTML = html;

function submeterWhatsApp(){
let texto = "Projeto Financeiro - Respostas:\n\n";
perguntas.forEach((p,i)=>{
    texto += `${i+1}. ${p}\nResposta: ${document.getElementById("p"+i).value}\n\n`;
});

window.open(
  "https://wa.me/351931760077?text=" + encodeURIComponent(texto),
  "_blank"
);
}

async function gerarPDF(){
const { jsPDF } = window.jspdf;
const pdf = new jsPDF();

pdf.setFontSize(18);
pdf.text("Projeto Financeiro", 10, 15);
pdf.setFontSize(12);

let y = 30;
perguntas.forEach((p,i)=>{
pdf.text(`${i+1}. ${p}`, 10, y);
y += 7;
pdf.text("Resposta: " + document.getElementById("p"+i).value, 10, y);
y += 12;

if(y > 270){
    pdf.addPage();
    y = 20;
}
});

pdf.save("Projeto_Financeiro.pdf");
}
</script>

<script>
(function(){
  const user = localStorage.getItem("site_session");
  if(user){
    document.getElementById("loginLink").style.display = "none";
    document.getElementById("profileLink").style.display = "inline-block";
    document.getElementById("logoutLink").style.display = "inline-block";
  }
})();
</script>

</body>
</html>
