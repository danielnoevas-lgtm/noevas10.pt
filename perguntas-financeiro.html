<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <title>Perguntas ‚Äî Projeto Financeiro</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
<nav class="navbar container">
  <div class="logo">Noevas10</div>
  <div class="nav-links"><a href="index.html">P√°gina Inicial</a><a href="sobre.html">Sobre Mim</a><a href="projetos.html" class="active">Projetos</a><a href="contactos.html">Contactos</a><a href="area.html">√Årea Pessoal</a></div>
</nav>

<main class="container">
  <h1>Projeto Financeiro ‚Äî 20 Perguntas</h1>

  <form id="form">
    <!-- perguntas geradas por script -->
    <div id="perguntas"></div>

    <div class="row">
      <button type="button" class="btn" id="saveBtn">Submeter & Guardar</button>
      <button type="button" class="btn secondary" id="analiseBtn" style="display:none">Obter An√°lise</button>
      <button type="button" class="btn secondary" id="pdfBtn" style="display:none">Gerar PDF</button>
      <button type="button" class="btn secondary" id="waBtn" style="display:none">Enviar p/ WhatsApp</button>
    </div>
  </form>

  <div id="analiseBox" class="card" style="display:none;margin-top:18px"></div>
</main>

<script>
const perguntas = [
"Qual √© o teu principal objetivo financeiro?",
"Quanto ganhas por m√™s (aprox.)?",
"Quanto consegues poupar por m√™s?",
"Tens d√≠vidas? Se sim, indica o tipo e valor aproximado.",
"Quais s√£o as tuas despesas fixas mensais?",
"J√° tentaste um or√ßamento? Como foi a experi√™ncia?",
"Tens fundo de emerg√™ncia? Quanto?",
"Que objetivos financeiros tens para 1 ano?",
"Que objetivos financeiros tens para 5 anos?",
"Investes atualmente? Em qu√™?",
"O que consideras prioridade financeira agora?",
"O que te impede de poupar mais?",
"Est√°s disposto a reduzir despesas? Em que √°reas?",
"Est√°s disposto a aumentar rendimentos? Como?",
"Quais s√£o os teus principais receios financeiros?",
"O que te motiva a melhorar as finan√ßas?",
"Fazes acompanhamento financeiro/consultoria?",
"Que valor gostarias de ter poupado at√© ao pr√≥ximo ano?",
"Se pudesses pedir orienta√ß√£o, em que √°rea seria?",
"Que a√ß√£o simples podes tomar j√° esta semana?"
];

const container = document.getElementById('perguntas');
perguntas.forEach((p,i)=>{
  const el = document.createElement('div');
  el.className='pergunta';
  el.innerHTML = `<label>${i+1}. ${p}</label><textarea name="q${i}"></textarea>`;
  container.appendChild(el);
});

// handlers
document.getElementById('saveBtn').addEventListener('click',()=>{
  const values = {};
  document.querySelectorAll('#perguntas textarea').forEach((ta,i)=>{
    values['q'+i]=ta.value.trim();
  });
  localStorage.setItem('respostas_financeiro', JSON.stringify(values));
  document.getElementById('analiseBtn').style.display='inline-block';
  document.getElementById('pdfBtn').style.display='inline-block';
  document.getElementById('waBtn').style.display='inline-block';
  alert('Respostas guardadas localmente. Podes agora obter an√°lise ou gerar PDF.');
});

document.getElementById('analiseBtn').addEventListener('click',()=>{
  const data = JSON.parse(localStorage.getItem('respostas_financeiro')||'{}');
  let summary = `<h3>Resumo & Recomenda√ß√µes</h3>`;
  // simples an√°lise: procura palavras-chave
  const vals = Object.values(data).join(' ').toLowerCase();
  if(vals.includes('d√≠vida')||vals.includes('divida')) summary += '<p>‚ö†Ô∏è Tens d√≠vidas ‚Äî prioriza o pagamento por ordem de juros.</p>';
  if(vals.includes('poupar')||vals.includes('poupan√ßa')) summary += '<p>‚úÖ Boa tend√™ncia de poupan√ßa ‚Äî considera automatizar.</p>';
  if(vals.includes('invest')||vals.includes('etf')||vals.includes('a√ß√µes')) summary += '<p>üìà Interesse em investir ‚Äî come√ßa por estudar ETFs e fundos de baixo custo.</p>';
  summary += '<p>‚û°Ô∏è A√ß√£o recomendada: define 1 objetivo financeiro para os pr√≥ximos 3 meses e abre uma conta poupan√ßa autom√°tica.</p>';
  document.getElementById('analiseBox').innerHTML = summary;
  document.getElementById('analiseBox').style.display='block';
});

document.getElementById('pdfBtn').addEventListener('click', async ()=>{
  const data = JSON.parse(localStorage.getItem('respostas_financeiro')||'{}');
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(14);
  doc.text('Projeto Financeiro - Respostas', 10, 14);
  let y = 24;
  Object.keys(data).forEach((k,i)=>{
    const text = `${i+1}. ${data[k]}`;
    doc.setFontSize(11);
    doc.text(doc.splitTextToSize(text,180), 10, y);
    y += 8 + Math.ceil(text.length/80)*6;
    if(y>270){doc.addPage(); y=20;}
  });
  doc.save('projeto-financeiro.pdf');
});

document.getElementById('waBtn').addEventListener('click',()=>{
  const data = JSON.parse(localStorage.getItem('respostas_financeiro')||'{}');
  let txt = 'Projeto Financeiro - Respostas:%0A%0A';
  Object.keys(data).forEach((k,i)=> txt += `${i+1}. ${data[k]}%0A%0A`);
  const phone='351931760077';
  window.open(`https://wa.me/${phone}?text=${encodeURIComponent(txt)}`,'_blank');
});
</script>
