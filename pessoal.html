<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Projeto Pessoal</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  textarea{width:100%;min-height:90px;border-radius:8px;padding:10px;margin-bottom:14px}
  label{display:block;margin:10px 0 6px;font-weight:600}
  .button{padding:12px 18px;border-radius:10px;background:#7a3cff;color:#fff;border:none;cursor:pointer;margin-top:10px;width:100%}
  .actions{display:flex;gap:12px;flex-direction:column}
</style>
</head>
<body>

<nav class="glass-nav">
  <div class="nav-container">
    <div class="logo">Noevas10</div>
    <ul class="nav-links">
      <li><a href="index.html">InÃ­cio</a></li>
      <li><a href="sobre.html">Sobre Mim</a></li>
      <li><a href="projetos.html">Projetos</a></li>
      <li><a href="contactos.html">Contactos</a></li>
      <li id="loginLink"><a href="login.html">Login</a></li>
      <li id="profileLink" style="display:none;"><a href="profile.html">Perfil</a></li>
      <li id="logoutLink" style="display:none;"><a href="#" onclick="logoutHandler();return false;">Sair</a></li>
    </ul>
    <div class="nav-cta"><a href="login.html">Entrar</a></div>
  </div>
</nav>

<main class="container" style="padding-top:120px">
  <h1>Projeto Pessoal</h1>
  <p>Responde com sinceridade â€” isto ajuda a montar um plano de desenvolvimento pessoal.</p>

  <form id="formProjetoPessoal" onsubmit="return false;">
    <div id="perguntasPessoal"></div>

    <div class="actions">
      <button type="button" class="button" onclick="enviarWhatsApp('pessoal')">ðŸ“© Enviar para WhatsApp</button>
      <button type="button" class="button" onclick="gerarPDF('pessoal')">ðŸ“„ Baixar PDF</button>
    </div>
  </form>
</main>

<script>
const perguntasPessoais = [
  "1) Quais sÃ£o os teus trÃªs principais valores pessoais?",
  "2) O que te motiva a acordar todos os dias?",
  "3) Quais sÃ£o as tuas principais forÃ§as/competÃªncias pessoais?",
  "4) Quais sÃ£o os hÃ¡bitos que gostarias de criar?",
  "5) Quais sÃ£o os hÃ¡bitos que gostarias de eliminar?",
  "6) Como avalias o teu equilÃ­brio vida/trabalho (1-10)?",
  "7) Quais sÃ£o os teus objetivos pessoais para 12 meses?",
  "8) Tens uma rotina matinal? Se sim, descreve-a.",
  "9) Tens objetivos de saÃºde/fitness? Quais e qual o prazo?",
  "10) Como geres o teu tempo atualmente?",
  "11) Que competÃªncias gostarias de desenvolver (soft skills)?",
  "12) Tens mentores ou pessoas que te inspiram? Quem e porquÃª?",
  "13) Como lidas com stress e frustraÃ§Ã£o?",
  "14) Que leitura/formaÃ§Ã£o estÃ¡s disposto a fazer nos prÃ³ximos 6 meses?",
  "15) Tens projetos criativos ou hobbies que queres desenvolver?",
  "16) O que te impede de atingir os teus objetivos pessoais hoje?",
  "17) Como medes o teu progresso pessoal (journaling, metas, KPI)?",
  "18) Qual Ã© a tua maior realizaÃ§Ã£o atÃ© hoje e porquÃª?",
  "19) Que suporte precisas para acelerar o teu desenvolvimento pessoal?",
  "20) Escreve uma frase motivadora/palavras que queiras recordar diariamente."
];

// render
const containerP = document.getElementById('perguntasPessoal');
let htmlP = '';
perguntasPessoais.forEach((q,i)=> {
  htmlP += `<label>${q}</label><textarea id="pes_p${i}" placeholder="Escreve aqui..."></textarea>`;
});
containerP.innerHTML = htmlP;

function obterInfoUtilizador(){
  const username = localStorage.getItem('site_session') || '';
  let profile = null;
  if(username){
    try { profile = JSON.parse(localStorage.getItem('profile_' + username)); }
    catch(e){ profile = null; }
  }
  return { username, profile };
}

function enviarWhatsApp(tipo){
  const info = obterInfoUtilizador();
  const nome = (info.profile && info.profile.nome) ? info.profile.nome : (info.username || 'Utilizador AnÃ³nimo');
  let texto = `Noevas10 â€” Projeto Pessoal\nUsuÃ¡rio: ${nome}\nData: ${new Date().toLocaleString()}\n\n`;
  perguntasPessoais.forEach((q,i)=>{
    const r = document.getElementById('pes_p'+i).value || '[sem resposta]';
    texto += `${i+1}. ${q}\nResposta: ${r}\n\n`;
  });
  const tel = "351931760077";
  const url = `https://wa.me/${tel}?text=${encodeURIComponent(texto)}`;
  window.open(url, '_blank');
}

async function gerarPDF(tipo){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({unit:'pt', format:'a4'});
  const info = obterInfoUtilizador();
  const nome = (info.profile && info.profile.nome) ? info.profile.nome : (info.username || 'Utilizador AnÃ³nimo');

  pdf.setFontSize(16);
  pdf.text("Projeto Pessoal â€” Noevas10", 40, 50);
  pdf.setFontSize(11);
  pdf.text(`UsuÃ¡rio: ${nome}`, 40, 70);
  pdf.text(`Data: ${new Date().toLocaleString()}`, 40, 86);

  let y = 110;
  pdf.setFontSize(10);
  perguntasPessoais.forEach((q,i)=>{
    const qText = `${i+1}. ${q}`;
    const rText = document.getElementById('pes_p'+i).value || '[sem resposta]';

    const splitQ = pdf.splitTextToSize(qText, 500);
    pdf.text(splitQ, 40, y);
    y += splitQ.length * 12;

    const splitR = pdf.splitTextToSize("Resposta: " + rText, 500);
    pdf.text(splitR, 55, y);
    y += splitR.length * 12 + 8;

    if(y > 750){ pdf.addPage(); y = 40; }
  });

  pdf.save('Projeto_Pessoal_Noevas10.pdf');
}

// navbar visibility
(function(){
  const username = localStorage.getItem('site_session');
  if(username){
    const loginLink = document.getElementById('loginLink');
    const profileLink = document.getElementById('profileLink');
    const logoutLink = document.getElementById('logoutLink');
    if(loginLink) loginLink.style.display = 'none';
    if(profileLink) profileLink.style.display = 'inline-block';
    if(logoutLink) logoutLink.style.display = 'inline-block';
  }
})();
</script>
</body>
</html>
