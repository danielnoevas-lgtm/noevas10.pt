<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perfil</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<nav class="glass-nav">
  <div class="nav-container">
    <div class="logo">Noevas10</div>
    <ul class="nav-links">
      <li><a href="index.html">Início</a></li>
      <li><a href="sobre.html">Sobre Mim</a></li>
      <li><a href="projetos.html">Projetos</a></li>
      <li><a href="contactos.html">Contactos</a></li>

      <li id="loginLink"><a href="login.html">Login</a></li>
      <li id="profileLink" style="display:none;" class="active"><a href="profile.html">Perfil</a></li>
      <li id="logoutLink" style="display:none;"><a href="#" onclick="logoutHandler(); return false;">Sair</a></li>
    </ul>
  </div>
</nav>

<main class="container" style="padding-top:120px;">
  <h1>O Meu Perfil</h1>

  <form id="profileForm" class="profile-form">

      <label>Nome:</label>
      <input type="text" id="nome">

      <label>Email:</label>
      <input type="email" id="email">

      <label>Idade:</label>
      <input type="number" id="idade">

      <label>Profissão:</label>
      <input type="text" id="profissao">

      <label>Telefone:</label>
      <input type="text" id="telefone">

      <label>Localidade:</label>
      <select id="localidade">
        <option value="">Selecione</option>
        <option>Lisboa</option>
        <option>Porto</option>
        <option>Coimbra</option>
        <option>Braga</option>
        <option>Setúbal</option>
        <option>Faro</option>
        <option>Aveiro</option>
      </select>

      <label>Frase Motivadora:</label>
      <textarea id="frase" rows="3"></textarea>

      <button type="button" class="button" onclick="guardarPerfil()">Guardar</button>

  </form>
</main>

<script>
(function(){
  const logged = localStorage.getItem("site_session");

  if(!logged){
      window.location.href = "login.html";
      return;
  }

  document.getElementById("loginLink").style.display = "none";
  document.getElementById("profileLink").style.display = "inline-block";
  document.getElementById("logoutLink").style.display = "inline-block";

  const dados = JSON.parse(localStorage.getItem("user_profile") || "{}");

  document.getElementById("nome").value = dados.nome || "";
  document.getElementById("email").value = dados.email || "";
  document.getElementById("idade").value = dados.idade || "";
  document.getElementById("profissao").value = dados.profissao || "";
  document.getElementById("telefone").value = dados.telefone || "";
  document.getElementById("localidade").value = dados.localidade || "";
  document.getElementById("frase").value = dados.frase || "";

})();

function guardarPerfil(){
  const dados = {
    nome: document.getElementById("nome").value,
    email: document.getElementById("email").value,
    idade: document.getElementById("idade").value,
    profissao: document.getElementById("profissao").value,
    telefone: document.getElementById("telefone").value,
    localidade: document.getElementById("localidade").value,
    frase: document.getElementById("frase").value
  };

  localStorage.setItem("user_profile", JSON.stringify(dados));
  alert("Perfil atualizado com sucesso!");
}
</script>

</body>
</html>
