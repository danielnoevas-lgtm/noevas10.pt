<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perguntas – Projeto Pessoal</title>
    <link rel="stylesheet" href="style.css">

    <style>
        .container { max-width: 900px; margin: auto; padding: 30px; }
        .pergunta { margin-bottom: 20px; }
        textarea { width: 100%; height: 80px; padding: 10px; border-radius: 6px; }
        button { padding: 12px 18px; cursor: pointer; margin-top: 20px; }
        #analiseBox { display:none; margin-top: 40px; padding: 20px; background:#111; border-radius:8px; }
    </style>
</head>

<body>

<h1 style="text-align:center;">Projeto Pessoal – Perguntas</h1>

<div class="container">
    <form id="formProjeto">
        <h3>Responde com sinceridade às 20 perguntas:</h3>

        <div id="perguntasContainer"></div>

        <button type="button" onclick="submeterRespostas()">Submeter</button>
        <button type="button" id="btnAnalise" style="display:none;" onclick="gerarAnalise()">Obter Análise</button>
        <button type="button" id="btnPDF" style="display:none;" onclick="downloadPDF()">Gerar PDF</button>
    </form>

    <div id="analiseBox"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>

<script>
    const perguntas = [
        "1. Como descreverias o teu estado emocional atual?",
        "2. Quais são as tuas maiores forças pessoais?",
        "3. Quais são as tuas maiores fraquezas?",
        "4. O que te faz sentir verdadeiramente realizado?",
        "5. Tens algum hábito que queres mudar?",
        "6. O que te impede de viver a tua melhor versão?",
        "7. Que sonho deixaste para trás e queres retomar?",
        "8. Que tipo de pessoa queres ser daqui a 5 anos?",
        "9. O que precisas de melhorar na tua rotina atual?",
        "10. Como estão as tuas relações pessoais?",
        "11. Sentes que tens equilíbrio entre vida e descanso?",
        "12. O que te deixa mais ansioso ou preocupado?",
        "13. Em que área pessoal queres evoluir primeiro?",
        "14. Qual é a tua prioridade atual?",
        "15. Sentes que tens controlo sobre a tua vida?",
        "16. Que impacto queres causar no mundo?",
        "17. Quem te inspira e porquê?",
        "18. O que te falta para seres mais feliz?",
        "19. Que mudança podes começar hoje?",
        "20. Se tivesses 1 ano livre, o que farias?"
    ];

    const container = document.getElementById("perguntasContainer");

    perguntas.forEach(p => {
        container.innerHTML += `
            <div class="pergunta">
                <label>${p}</label>
                <textarea name="resposta"></textarea>
            </div>`;
    });

    let respostasGuardadas = [];

    function submeterRespostas() {
        const respostas = [...document.querySelectorAll("textarea")]
            .map(t => t.value.trim());

        if (respostas.includes("")) {
            alert("⚠️ Responde a todas as perguntas antes de submeter.");
            return;
        }

        respostasGuardadas = respostas;

        document.getElementById("btnAnalise").style.display = "inline-block";
        alert("✔ Respostas submetidas! Agora podes obter a análise.");
    }

    function gerarAnalise() {
        let analise = "<h2>Análise do Teu Projeto Pessoal</h2>";

        if (respostasGuardadas[0].toLowerCase().includes("stress")) {
            analise += "<p>• Indicas sinais de stress → prioriza descanso e organização emocional.</p>";
        }

        if (respostasGuardadas[4].length > 5) {
            analise += "<p>• Identificaste hábitos a melhorar → foca-te num de cada vez.</p>";
        }

        if (respostasGuardadas[7].length > 10) {
            analise += "<p>• Tens uma visão clara do futuro → estás bem orientado.</p>";
        }

        analise += "<p>• Sugestão final: cria uma rotina diária simples com 3 prioridades que não podes falhar.</p>";

        const box = document.getElementById("analiseBox");
        box.style.display = "block";
        box.innerHTML = analise;

        document.getElementById("btnPDF").style.display = "inline-block";
    }

    function downloadPDF() {
        var doc = new jsPDF();

        doc.text("Projeto Pessoal - Análise", 10, 10);

        respostasGuardadas.forEach((r, i) => {
            doc.text(`${i+1}. ${r.substring(0,60)}`, 10, 20 + (i*7));
        });

        doc.save("analise-projeto-pessoal.pdf");
    }

</script>

</body>
</html>
