<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perguntas – Projeto de Vida</title>
    <link rel="stylesheet" href="style.css">

    <style>
        .container { max-width: 900px; margin: auto; padding: 30px; }
        .pergunta { margin-bottom: 20px; }
        textarea { width: 100%; height: 80px; padding: 10px; border-radius: 6px; }
        button { padding: 12px 18px; cursor: pointer; margin-top: 20px; }
        #analiseBox { display:none; margin-top: 40px; padding: 20px; background:#111; border-radius:8px; }
    </style>
</head>

<body>

<h1 style="text-align:center;">Projeto de Vida – Perguntas</h1>

<div class="container">
    <form id="formProjeto">
        <h3>Responde com sinceridade às 20 perguntas:</h3>

        <div id="perguntasContainer"></div>

        <button type="button" onclick="submeterRespostas()">Submeter</button>
        <button type="button" id="btnAnalise" style="display:none;" onclick="gerarAnalise()">Obter Análise</button>
        <button type="button" id="btnPDF" style="display:none;" onclick="downloadPDF()">Gerar PDF</button>
    </form>

    <div id="analiseBox"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>

<script>
    const perguntas = [
        "1. Qual é o teu maior objetivo de vida?",
        "2. Que legado queres deixar?",
        "3. O que te faz sentir vivo e motivado?",
        "4. Onde te imaginas a viver daqui a 10 anos?",
        "5. Com quem queres partilhar a tua vida?",
        "6. O que significa sucesso para ti?",
        "7. Qual é o teu maior medo?",
        "8. Que impacto queres ter no mundo?",
        "9. Como gostarias que te lembrassem?",
        "10. Quais são os teus valores mais importantes?",
        "11. O que estarias disposto a sacrificar para atingir os teus sonhos?",
        "12. O que não estás disposto a sacrificar?",
        "13. Qual foi a tua maior conquista até hoje?",
        "14. O que ainda queres conquistar?",
        "15. De que te arrependerias se morresses amanhã?",
        "16. O que mudarias na tua vida hoje?",
        "17. O que te impede de começar?",
        "18. Tens um plano para o futuro?",
        "19. Sentes que estás no caminho certo?",
        "20. Qual é a tua missão pessoal?"
    ];

    const container = document.getElementById("perguntasContainer");

    perguntas.forEach(p => {
        container.innerHTML += `
            <div class="pergunta">
                <label>${p}</label>
                <textarea name="resposta"></textarea>
            </div>`;
    });

    let respostasGuardadas = [];

    function submeterRespostas() {
        const respostas = [...document.querySelectorAll("textarea")]
            .map(t => t.value.trim());

        if (respostas.includes("")) {
            alert("⚠️ Responde a todas as perguntas antes de submeter.");
            return;
        }

        respostasGuardadas = respostas;

        document.getElementById("btnAnalise").style.display = "inline-block";
        alert("✔ Respostas submetidas! Agora podes obter a análise.");
    }

    function gerarAnalise() {
        let analise = "<h2>Análise do Teu Projeto de Vida</h2>";

        if (respostasGuardadas[0].length > 10) {
            analise += "<p>• Objetivo de vida claro → boa direção.</p>";
        }

        if (respostasGuardadas[5].toLowerCase().includes("dinheiro")) {
            analise += "<p>• Tens visão material → equilibra propósito e estabilidade.</p>";
        }

        if (respostasGuardadas[17].length < 5) {
            analise += "<p>• Falta de planeamento → cria um plano simples de 3 etapas.</p>";
        }

        analise += "<p>• Sugestão final: escreve a tua missão de vida e lê-a todas as manhãs.</p>";

        const box = document.getElementById("analiseBox");
        box.style.display = "block";
        box.innerHTML = analise;

        document.getElementById("btnPDF").style.display = "inline-block";
    }

    function downloadPDF() {
        var doc = new jsPDF();

        doc.text("Projeto de Vida - Análise", 10, 10);

        respostasGuardadas.forEach((r, i) => {
            doc.text(`${i+1}. ${r.substring(0,60)}`, 10, 20 + (i*7));
        });

        doc.save("analise-projeto-vida.pdf");
    }

</script>

</body>
</html>
