<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Projeto de Vida</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  textarea{width:100%;min-height:90px;border-radius:8px;padding:10px;margin-bottom:14px}
  label{display:block;margin:10px 0 6px;font-weight:600}
  .button{padding:12px 18px;border-radius:10px;background:#7a3cff;color:#fff;border:none;cursor:pointer;margin-top:10px;width:100%}
  .actions{display:flex;gap:12px;flex-direction:column}
</style>
</head>
<body>

<nav class="glass-nav">
  <div class="nav-container">
    <div class="logo">Noevas10</div>
    <ul class="nav-links">
      <li><a href="index.html">InÃ­cio</a></li>
      <li><a href="sobre.html">Sobre Mim</a></li>
      <li><a href="projetos.html">Projetos</a></li>
      <li><a href="contactos.html">Contactos</a></li>
      <li id="loginLink"><a href="login.html">Login</a></li>
      <li id="profileLink" style="display:none;"><a href="profile.html">Perfil</a></li>
      <li id="logoutLink" style="display:none;"><a href="#" onclick="logoutHandler();return false;">Sair</a></li>
    </ul>
    <div class="nav-cta"><a href="login.html">Entrar</a></div>
  </div>
</nav>

<main class="container" style="padding-top:120px">
  <h1>Projeto de Vida</h1>
  <p>Responde com honestidade. Estas perguntas ajudam a estruturar um plano de vida com propÃ³sito.</p>

  <form id="formProjetoVida" onsubmit="return false;">
    <div id="perguntasVida"></div>

    <div class="actions">
      <button type="button" class="button" onclick="enviarWhatsApp('vida')">ðŸ“© Enviar para WhatsApp</button>
      <button type="button" class="button" onclick="gerarPDF('vida')">ðŸ“„ Baixar PDF</button>
    </div>
  </form>
</main>

<script>
const perguntasVida = [
  "1) Quais sÃ£o os teus trÃªs objetivos de vida mais importantes?",
  "2) Qual Ã© a tua visÃ£o ideal de vida daqui a 5 anos?",
  "3) O que te dÃ¡ sentido e propÃ³sito atualmente?",
  "4) Quais hÃ¡bitos diÃ¡rios contribuem para essa visÃ£o?",
  "5) Que competÃªncias precisas desenvolver para chegar lÃ¡?",
  "6) Que sacrifÃ­cios estÃ¡s disposto a fazer para atingir esses objetivos?",
  "7) Tens um plano de aÃ§Ã£o com prazos? Descreve-o.",
  "8) Que pessoas te apoiam e como podem ajudar?",
  "9) Que obstÃ¡culos prevÃªs no caminho e como os gerirÃ¡s?",
  "10) Como medirÃ¡s o progresso dos teus objetivos de vida?",
  "11) Quais sÃ£o as tuas prioridades (famÃ­lia, carreira, saÃºde, etc.) e porquÃª?",
  "12) Como equilibras curto prazo (sobrevivÃªncia) com longo prazo (propÃ³sito)?",
  "13) Que decisÃµes financeiras jÃ¡ tens planeadas para apoiar a visÃ£o de vida?",
  "14) Que tipo de rotina diÃ¡ria te aproxima mais dos teus objetivos?",
  "15) Que formacÌ§aÌƒo e conhecimento precisas adquirir e em quanto tempo?",
  "16) Que projetos ou iniciativas pessoais gostarias de lanÃ§ar?",
  "17) Como lidas com falhas e retrocessos na tua jornada?",
  "18) Que legado gostarias de deixar a mÃ©dio/longo prazo?",
  "19) Quais sÃ£o os primeiros 3 passos prÃ¡ticos que vais tomar nas prÃ³ximas 4 semanas?",
  "20) Escreve uma frase curta que resuma a tua missÃ£o pessoal (uma frase motivadora)."
];

// render
const containerV = document.getElementById('perguntasVida');
let htmlV = '';
perguntasVida.forEach((q,i)=> {
  htmlV += `<label>${q}</label><textarea id="vid_p${i}" placeholder="Escreve aqui a tua resposta..."></textarea>`;
});
containerV.innerHTML = htmlV;

function obterInfoUtilizador(){
  const username = localStorage.getItem('site_session') || '';
  let profile = null;
  if(username){
    try { profile = JSON.parse(localStorage.getItem('profile_' + username)); }
    catch(e){ profile = null; }
  }
  return { username, profile };
}

function enviarWhatsApp(tipo){
  const info = obterInfoUtilizador();
  const nome = (info.profile && info.profile.nome) ? info.profile.nome : (info.username || 'Utilizador AnÃ³nimo');
  let texto = `Noevas10 â€” Projeto de Vida\nUsuÃ¡rio: ${nome}\nData: ${new Date().toLocaleString()}\n\n`;
  perguntasVida.forEach((q,i)=>{
    const r = document.getElementById('vid_p'+i).value || '[sem resposta]';
    texto += `${i+1}. ${q}\nResposta: ${r}\n\n`;
  });
  const tel = "351931760077";
  const url = `https://wa.me/${tel}?text=${encodeURIComponent(texto)}`;
  window.open(url, '_blank');
}

async function gerarPDF(tipo){
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({unit:'pt', format:'a4'});
  const info = obterInfoUtilizador();
  const nome = (info.profile && info.profile.nome) ? info.profile.nome : (info.username || 'Utilizador AnÃ³nimo');

  pdf.setFontSize(16);
  pdf.text("Projeto de Vida â€” Noevas10", 40, 50);
  pdf.setFontSize(11);
  pdf.text(`UsuÃ¡rio: ${nome}`, 40, 70);
  pdf.text(`Data: ${new Date().toLocaleString()}`, 40, 86);

  let y = 110;
  pdf.setFontSize(10);
  perguntasVida.forEach((q,i)=>{
    const qText = `${i+1}. ${q}`;
    const rText = document.getElementById('vid_p'+i).value || '[sem resposta]';

    const splitQ = pdf.splitTextToSize(qText, 500);
    pdf.text(splitQ, 40, y);
    y += splitQ.length * 12;

    const splitR = pdf.splitTextToSize("Resposta: " + rText, 500);
    pdf.text(splitR, 55, y);
    y += splitR.length * 12 + 8;

    if(y > 750){ pdf.addPage(); y = 40; }
  });

  pdf.save('Projeto_de_Vida_Noevas10.pdf');
}

// navbar visibility
(function(){
  const username = localStorage.getItem('site_session');
  if(username){
    const loginLink = document.getElementById('loginLink');
    const profileLink = document.getElementById('profileLink');
    const logoutLink = document.getElementById('logoutLink');
    if(loginLink) loginLink.style.display = 'none';
    if(profileLink) profileLink.style.display = 'inline-block';
    if(logoutLink) logoutLink.style.display = 'inline-block';
  }
})();
</script>
</body>
</html>
